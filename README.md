# Smart_IPC 项目

Smart_IPC 是一个跨平台、模块化、可裁剪的智能网络摄像头系统，支持 **RK3576**、**V853**、**K230** 等嵌入式平台。该项目采用 **C/C++** 编写，具备完善的软件分层结构，便于适配不同硬件平台并扩展多种业务功能，如视频监控、云平台对接、边缘智能分析等。

------

## 📦 项目架构

Smart_IPC 采用分层架构设计，便于解耦、移植和功能裁剪：

```
+---------------------+
|      应用层         | <- 提供外部接口，支持 Web 控制、RESTful API、ONVIF、GB28181 等协议
+---------------------+
|    基础业务层       | <- 管理核心业务逻辑，如音视频存储、设备远程升级、日志系统等
+---------------------+
|    基础软件层       | <- 集成开源库与通用模块，包含配置管理、事件分发、状态机、调度框架等
+---------------------+
|    硬件抽象层       | <- 屏蔽硬件差异，统一抽象音频、视频、USB、GPIO、串口等外设接口
+---------------------+
|      内核层         | <- 基于 Linux 内核，包含设备驱动、中断管理、内核模块等
+---------------------+
|      硬件层         | <- 支持多种平台 (RK3576 / V853 / K230)，底层芯片资源和外设连接
```

------

## 🛠️ 主要特性

- 🎥 支持多种视频编解码与流媒体协议（H.264/H.265, RTSP, GB28181）
- 📡 支持局域网与公网远程访问（HTTP、ONVIF、P2P 可扩展）
- 🔄 支持 OTA 升级和设备维护
- 📁 支持本地 TF 卡/NAS 云存储录像
- 📊 可扩展边缘 AI（人脸识别、区域入侵、目标检测等）
- 🧩 模块化组件，可按需裁剪功能，适配不同资源级别平台

------

## 🧱 技术栈与语言

- 编程语言：**C / C++**
- 操作系统：**Linux (Yocto / Tina / Buildroot / Ubuntu)**
- 跨平台支持：RK356x / V853 / K230 等 AArch64 平台
- 第三方库：FFmpeg、GStreamer、ONVIF SDK、libevent、curl、mongoose 等
- 网络协议支持：RTSP / HTTP / WebSocket / MQTT / GB28181 / ONVIF

------

## 📂 目录结构

```
Smart_IPC/
├── apps/                # 应用层：RESTful、Web服务、协议适配（ONVIF/GB28181）
├── services/            # 基础业务层：录像、升级、云服务
├── core/                # 基础软件层：配置、事件、调度、日志、状态机
├── hal/                 # 硬件抽象层：视频输入输出、音频、USB 等接口
├── kernel/              # 内核适配层：驱动交互接口或用户空间封装
├── platform/            # 平台适配层：RK356x、V853、K230 等差异化处理
├── thirdparty/          # 引入的三方库源码或封装接口
├── configs/             # 配置文件（JSON/XML/INI）
└── docs/                # 项目说明文档
```

------

## 🚀 编译与部署

### 环境依赖

- GCC（建议使用平台交叉工具链）
- CMake 或手动 Makefile
- 交叉编译 SDK（如 Tina SDK、Buildroot Toolchain）
- Python3（用于脚本和测试）

### 编译命令

```bash
# 以 RK3576 平台为例
source env_rk3576.sh   # 设置交叉编译环境变量
make PLATFORM=RK3576
```

------

## 📌 开发约定

- 所有模块尽量采用标准 C 接口，部分场景可使用 C++ 类封装但暴露 C API。
- 遵循统一的编码规范、模块初始化/退出机制（init/exit）
- 结构体统一采用 `typedef struct {...} type_t;` 形式
- 支持单元测试与集成测试框架（如 Unity、CppUTest 可选）

------

## 📈 项目规划

-  基本视频采集、编码与RTSP服务
-  本地录像与回放管理
-  ONVIF、GB28181 协议支持
-  支持 AI 模型推理框架接入（如 YOLO、人脸检测）
-  跨平台统一的调试与日志系统
-  UI 可视化配置工具

------

## 🤝 贡献指南

欢迎提交 Issue 与 PR！

- fork 项目，创建新分支
- 提交清晰描述的 PR，并通过构建验证
- 遵守模块接口命名规范和目录结构

------

## 📄 License

本项目基于 **MIT** 开源协议发布。
